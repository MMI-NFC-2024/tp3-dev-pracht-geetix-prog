---
import Layout from "../layouts/Layout.astro";
import GraphicSpecies from "../components/GraphicSpecies.astro";
import { Tabs, TabsList, TabsTab, TabsPanel } from 'accessible-astro-components'
---

<Layout>
  <h1 class="text-center text-2xl font-bold text-blue-500 mt-10">
    Mathis Guellati Tp2-dev-pracht
  </h1>
  <div class="mt-20 flex justify-center">
  <Tabs>
    <TabsList>
      <TabsTab id="tab1" class="!bg-blue-500" controls="panel1" selected>First tab</TabsTab>
      <TabsTab id="tab2" class="!bg-blue-500" controls="panel2">Second tab</TabsTab>
      <TabsTab id="tab3" class="!bg-blue-500" controls="panel3">Third tab</TabsTab>
    </TabsList>
    <TabsPanel class="bg-blue-100/25" id="panel1" labelledby="adelie" selected>
      <section id="adelie" class="inline-block align-top w-[700px] mr-5">
        <h2>Adelie</h2>
        <GraphicSpecies species="Adelie" />
      </section>
    </TabsPanel>
    <TabsPanel class="bg-blue-100/25" id="panel2" labelledby="tab2">
      <section id="chinstrap" class="inline-block align-top w-[700px] mr-5">
        <h2>Chinstrap</h2>
        <GraphicSpecies species="Chinstrap" />
      </section>
    </TabsPanel>
    <TabsPanel class="bg-blue-100/25" id="panel3" labelledby="tab3">
      <section id="gentoo" class="inline-block align-top w-[700px] mr-5">
        <h2>Gentoo</h2>
        <GraphicSpecies species="Gentoo" />
      </section>
    </TabsPanel>
  </Tabs>
  </div>
</Layout>
<script>
  document.querySelectorAll("nav a[href^='#']").forEach((a) => {
    a.addEventListener("click", function (e) {
      const target = document.querySelector(this.getAttribute("href"));
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: "smooth", inline: "start" });
      }
    });
  });
  document.querySelector("#graph")?.addEventListener("change", (evt) => {
    const value = (evt.target as HTMLSelectElement).value;
    const targetId = value.toLowerCase().replace("/", "");
    const targetElement = document.getElementById(targetId);
    if (targetElement) {
      targetElement.scrollIntoView({ behavior: "smooth", inline: "start" });
    }
  });
  document.addEventListener('keydown', (event) => {
      const tabs = document.querySelectorAll('[role="tab"]');
      const selectedTab = document.querySelector('[role="tab"][aria-selected="true"]');
      
      if (!selectedTab) return;
      
      const tabsArray = Array.from(tabs);
      const currentIndex = tabsArray.indexOf(selectedTab);
      let newIndex;
      
      if (event.key === 'ArrowLeft') {
        newIndex = currentIndex > 0 ? currentIndex - 1 : tabsArray.length - 1;
        event.preventDefault();
        tabsArray[newIndex].click();
      } else if (event.key === 'ArrowRight') {
        newIndex = currentIndex < tabsArray.length - 1 ? currentIndex + 1 : 0;
        event.preventDefault();
        tabsArray[newIndex].click();
      }
    });
</script>
