---
import Layout from "../layouts/Layout.astro";
import GraphicSpecies from "../components/GraphicSpecies.astro";
import { Tabs, TabsList, TabsTab, TabsPanel } from 'accessible-astro-components'
---

<Layout>
  <h1 class="text-center text-2xl font-bold text-blue-500 mt-10">
    Mathis Guellati Tp2-dev-pracht
  </h1>
  <div class="flex flex-col items-center space-y-5 mt-10">
    <p>Navigation dans la iframe :</p>
    <select
      id="graph"
      class="px-4 py-2 bg-white border-2 border-blue-500 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-300 focus:border-blue-500 cursor-pointer"
    >
      <option value="Adelie/">Adelie</option>
      <option value="Chinstrap/">Chinstrap</option>
      <option value="Gentoo/">Gentoo</option>
    </select>
  </div>
  <Tabs>
  <TabsList>
    <TabsTab id="tab1" controls="panel1" selected>First tab</TabsTab>
    <TabsTab id="tab2" controls="panel2">Second tab</TabsTab>
    <TabsTab id="tab3" controls="panel3">Third tab</TabsTab>
  </TabsList>

  <TabsPanel id="panel1" labelledby="tab1" selected>
    <h2>First panel</h2>
    <p>Content for first panel</p>
  </TabsPanel>
  <TabsPanel id="panel2" labelledby="tab2">
    <h2>Second panel</h2>
    <p>Content for second panel</p>
  </TabsPanel>
  <TabsPanel id="panel3" labelledby="tab3">
    <h2>Third panel</h2>
    <p>Content for third panel</p>
  </TabsPanel>
</Tabs>
  <div
    id="slider"
    class="mx-auto mt-10 w-2/3 border border-2 rounded border-blue-500 overflow-x-auto whitespace-nowrap scroll-smooth"
  >
    <section id="adelie" class="inline-block align-top w-[700px] mr-5">
      <h2>Adelie</h2>
      <GraphicSpecies species="Adelie" />
    </section>

    <section id="chinstrap" class="inline-block align-top w-[700px] mr-5">
      <h2>Chinstrap</h2>
      <GraphicSpecies species="Chinstrap" />
    </section>

    <section id="gentoo" class="inline-block align-top w-[700px]">
      <h2>Gentoo</h2>
      <GraphicSpecies species="Gentoo" />
    </section>
  </div>
</Layout>
<script>
  document.querySelectorAll("nav a[href^='#']").forEach((a) => {
    a.addEventListener("click", function (e) {
      const target = document.querySelector(this.getAttribute("href"));
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: "smooth", inline: "start" });
      }
    });
  });
  document.querySelector("#graph")?.addEventListener("change", (evt) => {
    const value = (evt.target as HTMLSelectElement).value;
    const targetId = value.toLowerCase().replace("/", "");
    const targetElement = document.getElementById(targetId);
    if (targetElement) {
      targetElement.scrollIntoView({ behavior: "smooth", inline: "start" });
    }
  });
</script>
